<%= simple_form_for @student, url: admission_path, method: :post do |f| %>
  <%#= f.error_notification %>
  <%#= Array.new(20){[*"A".."Z", *"0".."9"].sample}.join %>
  <legend><h1>New Student</h1></legend>
  <div class="row">
    <div class="col-sm-8">
      <div class="form-group"></div>
      <h3> Student Information </h3>
      <div class="form-inputs">
        <%= f.input :general_register_number, input_html: {class: "form-control", :value => @student.increment_register_no}, autofocus: true, placeholder: "General Register Number", disabled: true %>
      </div>
      <div class="form-group"></div>
      <div class="form-inputs">
        <%= f.label :joining_date, required: true %>
        <%= f.text_field :joining_date, class: "form-control", placeholder: "dd-mm-yy" %>
      </div>

      <div class="form-group"></div>
      <div class="form-inputs">
        <%= f.label :course_id %>
        <%= select("student", "course_id", Course.all.map{|m| [m.course_name, m.id]}, { :prompt => "--Select a Course--"}, {class: "form-control"}) %>
      </div>
      <div class="form-group"></div>
      <div class="form-inputs">
        <%= f.label :batch_id %>
        <div class="batches"> 
          <%= render :partial => 'batches_all', :f => p %>
        </div> 
      </div>

     <div class="form-group"></div>
      <h3> Personal Information </h3>
      <div class="form-inputs">
        <%= f.input :first_name, input_html: {class: "form-control"}, autofocus: true, placeholder: "First Name" %>
      </div>

      <div class="form-group"></div>
      <div class="form-inputs">
        <%= f.input :last_name, input_html: {class: "form-control"}, placeholder: "Last Name" %>
      </div>

      <div class="form-group"></div>
      <div class="form-inputs">
        <%= f.label :date_of_birth, required: true %>
        <%= f.text_field :date_of_birth, class: "form-control", placeholder: "dd-mm-yy" %>
      </div>

    <div class="form-group"></div>
    <div class="form-inputs">
      <%= f.input :nic, input_html: {class: "form-control", :"data-mask" => "999-999-9999"}, placeholder: "XXX-XXX-XXXX" %>
    </div>

    <div class="form-inputs">
      <%= f.input :address, input_html: {class: "form-control"}, placeholder: "Your current address" %>
    </div>

    <div class="form-inputs">
      <%= f.input :gender, input_html: {class: "form-control"}, as: :select, collection: Student::GENDER, prompt: "Choose your Gender" %>
    </div>

    <div class="form-group"></div>
    <h3> Contact Information </h3>
    <div class="form-inputs">
      <%= f.simple_fields_for :emergency_contacts  do |p| %>    
         <fieldset>
          <%= render "emergency_contacts_fields",  :f => p  %>
        </fieldset>
      <% end %>
      
    </div>

    <div class="form-group"></div>

    <div class="form-actions">
      <%= f.button :submit, class: "btn btn-primary" %>
    </div>
  </div>
  <div class="form-group"></div>
  <div class="col-sm-4"> 
    <div class="fileinput fileinput-new" data-provides="fileinput">
      <div class="fileinput-new thumbnail" style="width: 200px; height: 150px;">
        <%# unless @student.avatar.present? %>
          <%= image_tag("school.png") %>
        <%# else %>
          <%#= image_tag @student.avatar.url %>
        <%# end %>
      </div>
      <div class="fileinput-preview fileinput-exists thumbnail" style="max-width: 200px; max-height: 150px;"></div>
      <div>
        <span class="btn btn-default btn-file"><span class="fileinput-new">Select image</span><span class="fileinput-exists">Change</span><%= f.file_field :avatar, label: false %></span>
        <a href="#" class="btn btn-default fileinput-exists" data-dismiss="fileinput">Remove</a>
      </div>
    </div> 
  </div>
<% end %>

