<div class="row">
	<div class='col-md-12'>
		<h2>Time Table</h2>
		<div class="panel panel-primary">
      <div class="panel-heading">
        <h3 class="panel-title">Generate Time Table</h3>
      </div>
      <div class="panel-body">
        <%= form_tag time_table_index_path, method: "get" do %>
					<%= select_tag :search_class, options_for_select(SchoolClass.all.collect{|m| [m.class_name, m.class_name]}, :selected => params[:search_class]), :class => 'form-control', prompt: "--Select--"  %>
					<%#= text_field_tag :search_class, params[:search_class], class: "form-control" %>
						<%#= link_to "Clear", batches_path, :class => "btn btn-primary btn-sm pull-right", :style => "margin-left: 5px;" %>
					<br />
	        <%= submit_tag "Find", :name => nil, :class => "btn btn-info btn-sm pull-right" %>
				<% end %>
      </div>
    </div>

		<table class="table table-bordered">
			<thead>
				<tr id="time_table_week_days">
					<td class="heading" colspan="2">Periods</td>
					<td colspan="7" class="heading">Week Days</td>
				</tr>
				<tr>
					<td colspan="2"></td>
					<% @week_days.each do |week_day| %>
						<td><%= week_day.name %></td>
					<% end %>
				</tr>
			</thead>
			<tbody>
				<% (1..8).each do |n| %>
					<tr>
						<td colspan="2"><%= n %></td>
						<% @week_days.each do |week_day| %>
							<td>
								<% if @class.present? %>
									<% @class.periods.includes(:subject).where("week_day_id = ? AND level = ?", week_day, n).each do |period| %>
										<%= content_tag(:span, style: "background-color:"+@class.color+";margin-right:1px;padding:1.2px;color:#fff;") do %>
											<%= period.subject.short_name %>
										<% end %>
									<% end %>
								<% end %>
							</td>
						<% end %>
					</tr>
				<% end %>
			</tbody>
		</table>
	</div>
</div>